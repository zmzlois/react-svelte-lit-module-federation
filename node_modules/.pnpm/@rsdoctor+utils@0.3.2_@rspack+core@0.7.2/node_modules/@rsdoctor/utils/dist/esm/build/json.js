import { JsonStreamStringify } from "json-stream-stringify";
import { PassThrough } from "stream";
function stringify(json, replacer, space, cycle) {
  if (json && typeof json === "object") {
    return new Promise((resolve, reject) => {
      let res = "";
      const pt = new PassThrough();
      const stream = new JsonStreamStringify(json, replacer, space, cycle);
      pt.on("data", (chunk) => {
        res += chunk;
      });
      pt.on("end", () => {
        return resolve(res);
      });
      pt.on("error", (err) => {
        return reject(err);
      });
      stream.on("error", (err) => {
        return reject(err);
      });
      stream.pipe(pt);
    });
  }
  return Promise.resolve(JSON.stringify(json, replacer, space));
}
export {
  stringify
};
